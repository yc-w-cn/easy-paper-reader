import{T as p,j as s,B as i}from"./index-MtvP_01R.js";import{l as c,B as l,S as n}from"./PageWrapper-FKZhqcit.js";import{g as f,a as u}from"./get-xB22vYAQ.js";import{C as y}from"./ContentWrapper-OTqJJiay.js";import{u as x}from"./useQuery-aF-nEUjD.js";import{C as d}from"./index-Xmge4OC2.js";import{R as h}from"./ReloadOutlined-Te8GBRes.js";import"./key-name-frYyCvOB.js";import"./Skeleton-cj_tIE7P.js";import"./index--wi1o1rB.js";import"./PlusOutlined-m0myxD_0.js";import"./Overflow-JB_g7tJf.js";async function j(){return await c.getItem("comments")||[]}async function g(){var o;const m=await f(),t=[];for(const r of m){const a=await u(r.blockKeys);for(const e of a)(o=e==null?void 0:e.properties)!=null&&o.comment&&t.push({paperKey:r.key,blockKey:e.key,comment:e.properties.comment,mtime:e.mtime||e.ctime})}c.setItem("comments",t)}function I(){var o;const{message:m}=p.useApp(),t=x({queryKey:["comments-snapshot"],queryFn:()=>j()});return s.jsx(l,{mode:"custom",children:s.jsxs(y,{className:"p-5",children:[s.jsxs(n,{size:"small",children:[s.jsx(i,{onClick:()=>{g(),t.refetch(),m.success("操作成功")},type:"text",size:"small",icon:s.jsx(h,{})}),s.jsx("strong",{children:"全部笔记"})]}),s.jsx(n,{className:"my-3",children:(o=t.data)==null?void 0:o.map((r,a)=>s.jsx(d,{size:"small",className:"w-[200px]",children:r.comment},`comment-${a}`))})]})})}export{I as default};
