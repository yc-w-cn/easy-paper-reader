import{r as c,T as x,u as h,j as e,B as T}from"./index-l461O1zk.js";import{P as j,t as y}from"./alapi-cn-PMRslL2v.js";import{B as b,l as m}from"./PageWrapper-sLkUscXw.js";import{c as p}from"./key-name-frYyCvOB.js";import{L as F}from"./logger-bn6oalJg.js";import{u as P}from"./uuid-ILLB_dng.js";import{C as I}from"./index-lAP9lou2.js";import{I as w}from"./isSymbol-ylSl9bjA.js";import{b as B,d as C,e as R}from"./index-y2puK_AQ.js";import{T as N}from"./TranslationOutlined-ns2C0YBk.js";import"./_baseClone-M4oZtcv9.js";import"./axios-G2rPRu76.js";import"./Skeleton-sN1yhVZQ.js";import"./index-2dvF7Uke.js";import"./PlusOutlined-GqqakMkF.js";import"./Overflow-etUI6nZF.js";import"./_isIterateeCall-YsVKrjLR.js";import"./toNumber-DTwpbeKl.js";import"./debounce-zHi0SocO.js";import"./index-qjutKuMu.js";import"./index-ALfgnCkM.js";import"./dayjs.min-3Z0krTT9.js";import"./index-cAe5g6SG.js";const{Search:k}=w;function v(){const s=new F(v.name),[n,u]=c.useState(""),{message:d}=x.useApp(),f=h(),i=c.useRef(),g=async()=>{var o,l;if(!n)return;const t=p("fanyi",n),r=await m.getItem(t);if(r){s.debug("cachedResult",r),(o=i.current)==null||o.setFieldValue("translatedTitle",r);return}const a=await y(n);s.debug("result",a),a.code!==200&&d.error(a.msg),(l=i.current)==null||l.setFieldValue("translatedTitle",a.data.dst),m.setItem(t,a.data.dst)};return e.jsx(b,{children:e.jsx(I,{title:"开始新的征途",children:e.jsxs(B,{formRef:i,layout:"horizontal",className:"pt-2 w-[450px]",onFinish:async t=>{s.debug("values",t);const r=P(),a=new Date().getTime(),o=p("paper",r);return m.setItem(o,{...t,id:r,key:o,ctime:a}),f("/reader/"+r),!0},children:[e.jsx(C,{label:"文章名称",name:"title",children:e.jsx(k,{onChange:t=>{u(t.currentTarget.value)},enterButton:e.jsx(T,{type:"text",icon:e.jsx(N,{}),onClick:g})})}),e.jsx(R,{name:["translatedTitle"],children:({translatedTitle:t})=>{if(t)return e.jsx(j,{label:"中文名称",name:"translatedTitle",className:"focus:border-2"})}})]})})})}export{v as default};
