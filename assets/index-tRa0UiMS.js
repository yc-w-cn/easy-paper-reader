import{b as a}from"./get-tY70BRma.js";import{l as p}from"./localforage-m1Io_pXx.js";import{R as u}from"./index-nJ5_Qu1f.js";async function h(e,t){const r=await a(e);if(!r)return;const n={...r,...t,mtime:new Date().getTime()};return p.setItem(e,n)}var s=Object.prototype.hasOwnProperty;function c(e,t,r){for(r of e.keys())if(f(r,t))return r}function f(e,t){var r,n,i;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&f(e[n],t[n]););return n===-1}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if(i=n,i&&typeof i=="object"&&(i=c(t,i),!i)||!t.has(i))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if(i=n[0],i&&typeof i=="object"&&(i=c(t,i),!i)||!f(n[1],t.get(i)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(s.call(e,r)&&++n&&!s.call(t,r)||!(r in t)||!f(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}function l(e){const t=u.useRef(e),r=u.useRef(0);return f(e,t.current)||(t.current=e,r.current+=1),u.useMemo(()=>t.current,[r.current])}function w(e,t){u.useEffect(e,l(t))}function R(e,t){return u.useMemo(e,l(t))}export{w as a,h as b,R as u};
