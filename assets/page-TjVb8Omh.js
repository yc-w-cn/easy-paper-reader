import{aD as p,j as s,B as i}from"./index-nJ5_Qu1f.js";import{l as c}from"./localforage-m1Io_pXx.js";import{g as l}from"./get-tY70BRma.js";import{g as f}from"./get-JvQghSFS.js";import{B as u}from"./PageWrapper-8_FQrqxr.js";import{C as y}from"./ContentWrapper-Tsk5fy7j.js";import{u as x}from"./useQuery-5KjLgBKs.js";import{S as n}from"./index-caO_-RUu.js";import{C as d}from"./index-9RLMM_AV.js";import{R as h}from"./ReloadOutlined-VohjNPbD.js";import"./key-name-frYyCvOB.js";import"./Skeleton-LSpmVxsV.js";import"./EllipsisOutlined-dIR0QmpA.js";import"./Overflow-jrpfKu9v.js";import"./PlusOutlined-Ct-nDfX0.js";async function g(){return await c.getItem("comments")||[]}async function j(){var o;const m=await l(),t=[];for(const r of m){const a=await f(r.blockKeys);for(const e of a)(o=e==null?void 0:e.properties)!=null&&o.comment&&t.push({paperKey:r.key,blockKey:e.key,comment:e.properties.comment,mtime:e.mtime||e.ctime})}c.setItem("comments",t)}function E(){var o;const{message:m}=p.useApp(),t=x({queryKey:["comments-snapshot"],queryFn:()=>g()});return s.jsx(u,{mode:"custom",children:s.jsxs(y,{className:"p-5",children:[s.jsxs(n,{size:"small",children:[s.jsx(i,{onClick:()=>{j(),t.refetch(),m.success("操作成功")},type:"text",size:"small",icon:s.jsx(h,{})}),s.jsx("strong",{children:"全部笔记"})]}),s.jsx(n,{className:"my-3",children:(o=t.data)==null?void 0:o.map((r,a)=>s.jsx(d,{size:"small",className:"w-[200px]",children:r.comment},`comment-${a}`))})]})})}export{E as default};
