import{r as c,T as x,u as h,j as e,B as T}from"./index-MtvP_01R.js";import{P as j,t as y}from"./alapi-cn-LNpxjb33.js";import{B as b,l as m}from"./PageWrapper-FKZhqcit.js";import{c as p}from"./key-name-frYyCvOB.js";import{L as F}from"./logger-bn6oalJg.js";import{u as P}from"./uuid-ILLB_dng.js";import{C as w}from"./index-Xmge4OC2.js";import{I}from"./isSymbol-dVO9QnlM.js";import{b as B,d as C,e as R}from"./index-Tlz4NJaH.js";import{T as N}from"./TranslationOutlined-v3zYHuJb.js";import"./_baseClone-VYtN7Lua.js";import"./axios-G2rPRu76.js";import"./Skeleton-cj_tIE7P.js";import"./index--wi1o1rB.js";import"./PlusOutlined-m0myxD_0.js";import"./Overflow-JB_g7tJf.js";import"./_isIterateeCall-igopalK8.js";import"./toNumber-_-vq0GBE.js";import"./debounce-qpYkvMsV.js";import"./index-RkOQ1cC1.js";import"./index--4YTblit.js";import"./dayjs.min-Kd2Zu8Td.js";import"./index-im4EAsxI.js";const{Search:k}=I;function v(){const s=new F(v.name),[i,u]=c.useState(""),{message:d}=x.useApp(),f=h(),n=c.useRef(),g=async()=>{var o,l;if(!i)return;const t=p("fanyi",i),r=await m.getItem(t);if(r){s.debug("cachedResult",r),(o=n.current)==null||o.setFieldValue("translatedTitle",r);return}const a=await y(i);s.debug("result",a),a.code!==200&&d.error(a.msg),(l=n.current)==null||l.setFieldValue("translatedTitle",a.data.dst),m.setItem(t,a.data.dst)};return e.jsx(b,{children:e.jsx(w,{title:"开始新的征途",children:e.jsxs(B,{formRef:n,layout:"horizontal",className:"pt-2 w-[450px]",onFinish:async t=>{s.debug("values",t);const r=P(),a=new Date().getTime(),o=p("paper",r);return await m.setItem(o,{...t,id:r,key:o,ctime:a}),f("/reader/"+r),!0},children:[e.jsx(C,{label:"文章名称",name:"title",children:e.jsx(k,{onChange:t=>{u(t.currentTarget.value)},enterButton:e.jsx(T,{type:"text",icon:e.jsx(N,{}),onClick:g})})}),e.jsx(R,{name:["translatedTitle"],children:({translatedTitle:t})=>{if(t)return e.jsx(j,{label:"中文名称",name:"translatedTitle",className:"focus:border-2"})}})]})})})}export{v as default};
