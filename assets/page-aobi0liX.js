import{r as p,aD as x,u as h,j as e,B as j}from"./index-nJ5_Qu1f.js";import{I as T,X as y,D as F,V as I,Y as b}from"./alapi-cn-Nb8citiB.js";import{B as P}from"./PageWrapper-8_FQrqxr.js";import{c}from"./key-name-frYyCvOB.js";import{L as w}from"./logger-bn6oalJg.js";import{u as B}from"./uuid-ILLB_dng.js";import{l as m}from"./localforage-m1Io_pXx.js";import{C}from"./index-9RLMM_AV.js";import{I as R}from"./isSymbol-zxzHQtaF.js";import{T as D}from"./TranslationOutlined-KiJt4sMo.js";import"./index-caO_-RUu.js";import"./_isIterateeCall-orR7kcV2.js";import"./RightOutlined--2jBD1Y3.js";import"./toNumber-6bwaZxZm.js";import"./_baseClone-_ueZR0dj.js";import"./debounce-JYfLaqhh.js";import"./Overflow-jrpfKu9v.js";import"./PurePanel-aFiaa7Kc.js";import"./index-5mSCtMnv.js";import"./move-qI-nUOt9.js";import"./index-a1uKF60-.js";import"./dayjs.min-M7lkFoxI.js";import"./index-lMci77ll.js";import"./PlusOutlined-Ct-nDfX0.js";import"./axios-G2rPRu76.js";import"./Skeleton-LSpmVxsV.js";import"./EllipsisOutlined-dIR0QmpA.js";const{Search:N}=R;function k(){const s=new w(k.name),[i,u]=p.useState(""),{message:d}=x.useApp(),f=h(),n=p.useRef(),g=async()=>{var o,l;if(!i)return;const t=c("fanyi",i),r=await m.getItem(t);if(r){s.debug("cachedResult",r),(o=n.current)==null||o.setFieldValue("translatedTitle",r);return}const a=await b(i);s.debug("result",a),a.code!==200&&d.error(a.msg),(l=n.current)==null||l.setFieldValue("translatedTitle",a.data.dst),m.setItem(t,a.data.dst)};return e.jsx(P,{children:e.jsx(C,{title:"开始新的征途",children:e.jsxs(T,{formRef:n,layout:"horizontal",className:"pt-2 w-[450px]",onFinish:async t=>{s.debug("values",t);const r=B(),a=new Date().getTime(),o=c("paper",r);return m.setItem(o,{...t,id:r,key:o,ctime:a}),f("/reader/"+r),!0},children:[e.jsx(y,{label:"文章名称",name:"title",children:e.jsx(N,{onChange:t=>{u(t.currentTarget.value)},enterButton:e.jsx(j,{type:"text",icon:e.jsx(D,{}),onClick:g})})}),e.jsx(F,{name:["translatedTitle"],children:({translatedTitle:t})=>{if(t)return e.jsx(I,{label:"中文名称",name:"translatedTitle",className:"focus:border-2"})}})]})})})}export{k as default};
